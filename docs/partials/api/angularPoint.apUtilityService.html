<h1><code ng:non-bindable="">apUtilityService</code>
<div><span class="hint">service in module <code ng:non-bindable="">angularPoint</code>
</span>
</div>
</h1>
<div><h2 id="description">Description</h2>
<div class="description"><div class="angularpoint-aputilityservice-page"><p>Provides shared utility functionality across the application.</p>
</div></div>
<h2 id="dependencies">Dependencies</h2>
<ul class="dependencies"><li><code ng:non-bindable=""><a href="#/api/angularPoint.apConfig">apConfig</a></code>
</li>
</ul>
<div class="member method"><h2 id="methods">Methods</h2>
<ul class="methods"><li><h3 id="methods_batchprocess">batchProcess(entities, process, context, delay, maxItems)</h3>
<div class="batchprocess"><div class="angularpoint-aputilityservice-page angularpoint-aputilityservice-batchprocess-page"><p>We REALLY don&#39;t want to lock the user&#39;s browser (blocking the UI thread) while iterating over an array of
entities and performing some process on them.  This function cuts the process into as many 50ms chunks as are
necessary. Based on example found in the following article:
<a href="http://www.nczonline.net/blog/2009/08/11/timed-array-processing-in-javascript/">Timed array processing in JavaScript</a>;</p>
</div><h5 id="methods_batchprocess_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>entities</td><td><a href="" class="label type-hint type-hint-object">Object[]</a></td><td><div class="angularpoint-aputilityservice-page angularpoint-aputilityservice-batchprocess-page"><p>The entities that need to be processed.</p>
</div></td></tr><tr><td>process</td><td><a href="" class="label type-hint type-hint-function">Function</a></td><td><div class="angularpoint-aputilityservice-page angularpoint-aputilityservice-batchprocess-page"><p>Reference to the process to be executed for each of the entities.</p>
</div></td></tr><tr><td>context</td><td><a href="" class="label type-hint type-hint-object">Object</a></td><td><div class="angularpoint-aputilityservice-page angularpoint-aputilityservice-batchprocess-page"><p>this</p>
</div></td></tr><tr><td>delay</td><td><a href="" class="label type-hint type-hint-number">Number</a></td><td><div class="angularpoint-aputilityservice-page angularpoint-aputilityservice-batchprocess-page"><p>Number of milliseconds to delay between batches.</p>
</div> <p><em>(default: 25)</em></p></td></tr><tr><td>maxItems</td><td><a href="" class="label type-hint type-hint-number">Number</a></td><td><div class="angularpoint-aputilityservice-page angularpoint-aputilityservice-batchprocess-page"><p>Maximum number of entities to process before pausing.</p>
</div> <p><em>(default: entities.length)</em></p></td></tr></tbody></table><h5 id="methods_batchprocess_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-object">Object</a></td><td><div class="angularpoint-aputilityservice-page angularpoint-aputilityservice-batchprocess-page"><p>Promise</p>
</div></td></tr></table><h4 id="methods_batchprocess_example">Example</h4>
<div class="example"><div class="angularpoint-aputilityservice-page angularpoint-aputilityservice-batchprocess-page"><pre class="prettyprint linenums">
function buildProjectSummary = function() {
   var deferred = $q.defer();

   // Taken from a fictitious projectsModel.js
   projectModel.getAllListItems().then(function(entities) {
     var summaryObject = {};
     var extendProjectSummary = function(project) {
         // Do some process intensive stuff here

     };

     // Now that we have all of our projects we want to iterate
     // over each to create our summary object. The problem is
     // this could easily cause the page to hang with a sufficient
     // number of entities.
     apUtilityService.batchProcess(entities, extendProjectSummary, function() {
         // Long running process is complete so resolve promise
         deferred.resolve(summaryObject);
     }, 25, 1000);
   };

   return deferred.promise;
}

</pre>
</div></div>
</div>
</li>
<li><h3 id="methods_converteffectivepermmask">convertEffectivePermMask(permMaskName)</h3>
<div class="converteffectivepermmask"><div class="angularpoint-aputilityservice-page angularpoint-aputilityservice-converteffectivepermmask-page"><p>GetListItemsSinceToken operation returns the list element with an EffectivePermMask attribute which is the
name of the PermissionMask.  We then need to convert the name into an actual mask so this function contains
the known permission names with their masks.  If a provided mask name is found, the cooresponding mask
is returned.  Otherwise returns null.  <a href="http://msdn.microsoft.com/en-us/library/jj575178(v=office.12">MSDN Source</a>.aspx)</p>
</div><h5 id="methods_converteffectivepermmask_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>permMaskName</td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="angularpoint-aputilityservice-page angularpoint-aputilityservice-converteffectivepermmask-page"><p>Permission mask name.</p>
</div></td></tr></tbody></table><h5 id="methods_converteffectivepermmask_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-string">string|null</a></td><td><div class="angularpoint-aputilityservice-page angularpoint-aputilityservice-converteffectivepermmask-page"><p>Return the mask for the name.</p>
</div></td></tr></table></div>
</li>
<li><h3 id="methods_datewithinrange">dateWithinRange(startDate, endDate, dateToCheck)</h3>
<div class="datewithinrange"><div class="angularpoint-aputilityservice-page angularpoint-aputilityservice-datewithinrange-page"><p>Converts dates into yyyymmdd formatted ints and evaluates to determine if the dateToCheck
falls within the date range provided</p>
</div><h5 id="methods_datewithinrange_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>startDate</td><td><a href="" class="label type-hint type-hint-date">Date</a></td><td><div class="angularpoint-aputilityservice-page angularpoint-aputilityservice-datewithinrange-page"><p>Starting date.</p>
</div></td></tr><tr><td>endDate</td><td><a href="" class="label type-hint type-hint-date">Date</a></td><td><div class="angularpoint-aputilityservice-page angularpoint-aputilityservice-datewithinrange-page"><p>Ending date.</p>
</div></td></tr><tr><td>dateToCheck</td><td><a href="" class="label type-hint type-hint-date">Date</a></td><td><div class="angularpoint-aputilityservice-page angularpoint-aputilityservice-datewithinrange-page"><p>Defaults to the current date.</p>
</div> <p><em>(default: new Date())</em></p></td></tr></tbody></table><h5 id="methods_datewithinrange_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-boolean">boolean</a></td><td><div class="angularpoint-aputilityservice-page angularpoint-aputilityservice-datewithinrange-page"><p>Does the date fall within the range?</p>
</div></td></tr></table></div>
</li>
<li><h3 id="methods_doubledigit">doubleDigit(val)</h3>
<div class="doubledigit"><div class="angularpoint-aputilityservice-page angularpoint-aputilityservice-doubledigit-page"><p>Add a leading zero if a number/string only contains a single character.  So in the case
where the number 9 is passed in the string &#39;09&#39; is returned.</p>
</div><h5 id="methods_doubledigit_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>val</td><td><a href="" class="label type-hint type-hint-number">number</a><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="angularpoint-aputilityservice-page angularpoint-aputilityservice-doubledigit-page"><p>A number or string to evaluate.</p>
</div></td></tr></tbody></table><h5 id="methods_doubledigit_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="angularpoint-aputilityservice-page angularpoint-aputilityservice-doubledigit-page"><p>Two digit string.</p>
</div></td></tr></table></div>
</li>
<li><h3 id="methods_fromcamelcase">fromCamelCase(s)</h3>
<div class="fromcamelcase"><div class="angularpoint-aputilityservice-page angularpoint-aputilityservice-fromcamelcase-page"><p>Converts a camel case string into a space delimited string with each word having a capitalized first letter.</p>
</div><h5 id="methods_fromcamelcase_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>s</td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="angularpoint-aputilityservice-page angularpoint-aputilityservice-fromcamelcase-page"><p>String to convert.</p>
</div></td></tr></tbody></table><h5 id="methods_fromcamelcase_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="angularpoint-aputilityservice-page angularpoint-aputilityservice-fromcamelcase-page"><p>Humanized string.</p>
</div></td></tr></table></div>
</li>
<li><h3 id="methods_registerchange">registerChange(model)</h3>
<div class="registerchange"><div class="angularpoint-aputilityservice-page angularpoint-aputilityservice-registerchange-page"><p>If online and sync is being used, notify all online users that a change has been made.
//Todo Break this functionality into FireBase module that can be used if desired.</p>
</div><h5 id="methods_registerchange_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>model</td><td><a href="" class="label type-hint type-hint-object">object</a></td><td><div class="angularpoint-aputilityservice-page angularpoint-aputilityservice-registerchange-page"><p>event</p>
</div></td></tr></tbody></table></div>
</li>
<li><h3 id="methods_resolvepermissions">resolvePermissions(permissionsMask)</h3>
<div class="resolvepermissions"><div class="angularpoint-aputilityservice-page angularpoint-aputilityservice-resolvepermissions-page"><p>Converts permMask into something usable to determine permission level for current user.  Typically used
directly from a list item.  See ListItem.resolvePermissions.</p>
<h6 id="methods_resolvepermissions_additional-info">Additional Info</h6>

<ul>
<li><a href="http://sympmarc.com/2009/02/03/permmask-in-sharepoint-dvwps/">PermMask in SharePoint DVWPs</a></li>
<li><a href="http://spservices.codeplex.com/discussions/208708">$().SPServices.SPLookupAddNew and security trimming</a></li>
</ul>
</div><h5 id="methods_resolvepermissions_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>permissionsMask</td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="angularpoint-aputilityservice-page angularpoint-aputilityservice-resolvepermissions-page"><p>The WSS Rights Mask is an 8-byte, unsigned integer that specifies
the rights that can be assigned to a user or site group. This bit mask can have zero or more flags set.</p>
</div></td></tr></tbody></table><h5 id="methods_resolvepermissions_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-object">object</a></td><td><div class="angularpoint-aputilityservice-page angularpoint-aputilityservice-resolvepermissions-page"><p>Object with properties for each permission level identifying if current user has rights (true || false)</p>
</div></td></tr></table><h4 id="methods_resolvepermissions_example">Example</h4>
<div class="example"><div class="angularpoint-aputilityservice-page angularpoint-aputilityservice-resolvepermissions-page"><pre class="prettyprint linenums">
var perm = apUtilityService.resolvePermissions('0x0000000000000010');
</pre>
Example of what the returned object would look like
for a site admin.
<pre class="prettyprint linenums">
perm = {
   "ViewListItems":true,
   "AddListItems":true,
   "EditListItems":true,
   "DeleteListItems":true,
   "ApproveItems":true,
   "OpenItems":true,
   "ViewVersions":true,
   "DeleteVersions":true,
   "CancelCheckout":true,
   "PersonalViews":true,
   "ManageLists":true,
   "ViewFormPages":true,
   "Open":true,
   "ViewPages":true,
   "AddAndCustomizePages":true,
   "ApplyThemeAndBorder":true,
   "ApplyStyleSheets":true,
   "ViewUsageData":true,
   "CreateSSCSite":true,
   "ManageSubwebs":true,
   "CreateGroups":true,
   "ManagePermissions":true,
   "BrowseDirectories":true,
   "BrowseUserInfo":true,
   "AddDelPrivateWebParts":true,
   "UpdatePersonalWebParts":true,
   "ManageWeb":true,
   "UseRemoteAPIs":true,
   "ManageAlerts":true,
   "CreateAlerts":true,
   "EditMyUserInfo":true,
   "EnumeratePermissions":true,
   "FullMask":true
}
</pre>
</div></div>
</div>
</li>
<li><h3 id="methods_stringifyxml">stringifyXML(xml)</h3>
<div class="stringifyxml"><div class="angularpoint-aputilityservice-page angularpoint-aputilityservice-stringifyxml-page"><p>Simple utility to convert an XML object into a string and remove unnecessary whitespace.</p>
</div><h5 id="methods_stringifyxml_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>xml</td><td><a href="" class="label type-hint type-hint-object">object</a></td><td><div class="angularpoint-aputilityservice-page angularpoint-aputilityservice-stringifyxml-page"><p>XML object.</p>
</div></td></tr></tbody></table><h5 id="methods_stringifyxml_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="angularpoint-aputilityservice-page angularpoint-aputilityservice-stringifyxml-page"><p>Stringified version of the XML object.</p>
</div></td></tr></table></div>
</li>
<li><h3 id="methods_yyyymmdd">yyyymmdd()</h3>
<div class="yyyymmdd"><div class="angularpoint-aputilityservice-page angularpoint-aputilityservice-yyyymmdd-page"><p>Convert date into a int formatted as yyyymmdd
We don&#39;t need the time portion of comparison so an int makes this easier to evaluate</p>
</div></div>
</li>
</ul>
</div>
</div>
